<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Secret Place Quiz | YRA</title>
    <link rel="stylesheet" href="quiz.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;800&family=Cormorant+Garamond:ital,wght@1,600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="portal-body">

    <header class="sanctuary-header">
        <a href="dashboard.html" class="nav-brand">Y<span>R</span>A</a>
        <nav class="top-nav-links">
            <a href="quiz-portal.html" class="back-link"><i class="fa-solid fa-arrow-left"></i> Exit Quiz</a>
        </nav>
    </header>

    <main class="portal-container">
        
        <section id="quiz-box" class="quiz-row" style="display: block; cursor: default;">
            <div class="portal-intro" style="text-align: left; margin-bottom: 20px;">
                <span class="badge" id="q-count">Question 1 of 10</span>
                <h1 id="q-text" style="font-size: 1.4rem; font-family: 'Plus Jakarta Sans'; font-style: normal; margin-top: 15px;">
                    Loading question...
                </h1>
            </div>

            <div id="options-container" class="quiz-stack">
                </div>

            <button id="next-btn" class="unlock-btn hidden" style="margin-top: 25px;" onclick="nextQuestion()">Next Question</button>
        </section>

        <section id="results-box" class="quiz-row hidden" style="display: none; flex-direction: column; text-align: center; padding: 40px 20px;">
            <div class="portal-intro">
                <span class="badge">Assessment Result</span>
                <h1 id="final-score" style="font-size: 3.5rem; color: var(--primary);">0/10</h1>
                <p id="feedback-msg">Intimacy is the key to spiritual growth.</p>
            </div>

            <form action="https://formsubmit.co/youngrevivalistacademy01@gmail.com" method="POST" style="width: 100%;">
                <input type="hidden" name="_subject" value="Secret Place Quiz Result">
                <input type="text" name="Name" placeholder="Student Full Name" id="passkey-input" style="letter-spacing: normal; font-size: 1rem; margin-bottom: 10px;" required>
                <input type="text" name="Matric" placeholder="Matric Number" id="passkey-input" style="letter-spacing: normal; font-size: 1rem;" required>
                <input type="hidden" name="Score" id="score-hidden">
                
                <button type="submit" class="unlock-btn">Submit to Academy</button>
            </form>
        </section>

    </main>

    <script>
        const questions = [
            { q: "Before the fall of man, the absence of altars and Bible study indicates:", a: ["Man lacked spiritual responsibility", "God had not revealed His nature", "Relationship was based on direct fellowship", "Man was immature"], c: 2 },
            { q: "Prayer altars and scriptural study after the fall reveal that:", a: ["God changed His original plan", "Fellowship required intentional pursuit", "Humanity no longer needed obedience", "Angels replaced God"], c: 1 },
            { q: "The Secret Place is best understood as:", a: ["A physical room", "A ritual of solitude", "A spiritual dimension of union", "A state for advanced believers"], c: 2 },
            { q: "The statement 'The Secret Place is in you' means that:", a: ["God no longer dwells in heaven", "Indwelling presence grants constant access", "Only pastors host God", "Believers cannot lose intimacy"], c: 1 },
            { q: "Neglecting prayer or the Word implies that a believer:", a: ["Lost salvation entirely", "No longer desires God's influence", "Is disqualified from ministry", "Has no spiritual gifts"], c: 1 },
            { q: "Prayer as the believer’s love language teaches that:", a: ["Prayer is for asking things", "Intimacy is shown in consistency", "Only long prayers have power", "Prayer is a public act"], c: 1 },
            { q: "Worship being 'for God’s pleasure' means:", a: ["It satisfies the believer", "It is for artistic expression", "It aligns the believer by surrender", "It's only for church services"], c: 2 },
            { q: "The Word (Logos) becomes transformative when:", a: ["Studied intellectually", "Memorized in large portions", "It moves to revelation through meditation", "Used to impress others"], c: 2 },
            { q: "The Secret Place produces evangelism because:", a: ["People become argumentative", "Intimacy naturally overflows", "It's required for salvation", "It replaces prayer"], c: 1 },
            { q: "The 5 elements are described as 'tools' because:", a: ["They are optional", "They earn God's approval", "They enable partnership with God", "They are church programs"], c: 2 }
        ];

        let currentQ = 0;
        let score = 0;

        function initQuiz() {
            const quiz = questions[currentQ];
            document.getElementById('q-count').innerText = `Question ${currentQ + 1} of ${questions.length}`;
            document.getElementById('q-text').innerText = quiz.q;
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            quiz.a.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'quiz-row';
                btn.style.width = '100%';
                btn.style.marginBottom = '10px';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(i, btn);
                container.appendChild(btn);
            });
        }

        function checkAnswer(idx, btn) {
            const correct = questions[currentQ].c;
            const allBtns = document.querySelectorAll('#options-container .quiz-row');
            allBtns.forEach(b => b.style.pointerEvents = 'none');

            if(idx === correct) {
                btn.style.borderColor = '#2e7d32';
                btn.style.background = 'rgba(46, 125, 50, 0.1)';
                score++;
            } else {
                btn.style.borderColor = '#c62828';
                btn.style.background = 'rgba(198, 40, 40, 0.1)';
                allBtns[correct].style.borderColor = '#2e7d32';
            }
            document.getElementById('next-btn').classList.remove('hidden');
        }

        function nextQuestion() {
            currentQ++;
            if(currentQ < questions.length) {
                document.getElementById('next-btn').classList.add('hidden');
                initQuiz();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('quiz-box').style.display = 'none';
            const resBox = document.getElementById('results-box');
            resBox.style.display = 'flex';
            resBox.classList.remove('hidden');
            document.getElementById('final-score').innerText = `${score}/${questions.length}`;
            document.getElementById('score-hidden').value = `${score}/${questions.length}`;
        }

        initQuiz();
    </script>
</body>
</html>